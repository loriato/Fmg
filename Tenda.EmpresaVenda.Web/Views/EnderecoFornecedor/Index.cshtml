@using Tenda.EmpresaVenda.Web.Models.Application
@using Europa.Resources
@using Tenda.Domain.Core.Enums
@using Europa.Resources

@{
    ViewBag.Codigo = "PAG12";
    ViewBag.Title = ApplicationInfo.TituloUnidadeFuncional(ViewBag.Codigo);
}

<script type="text/javascript" src="~/Static/projeto/endereco-fornecedor/index-endereco-fornecedor.js"></script>
<script type="text/javascript" src="~/Static/projeto/endereco-fornecedor/import-endereco-fornecedor.js"></script>

<script>
    Europa.Controllers.EnderecoFornecedor.UrlListarEnderecoFornecedor = '@Url.Action("ListarEnderecoFornecedor", "EnderecoFornecedor")';
    Europa.Controllers.EnderecoFornecedor.UrUploadEnderecoFornecedor = '@Url.Action("UploadEnderecoFornecedor", "EnderecoFornecedor")';
</script>

<div id="titlebar-name">@ViewBag.Title</div>

<div id="titlebar-buttons">
    @*@if (SessionAttributes.Current().HasPermission(ViewBag.Codigo, "ImportarTabelas"))
    {*@
        <button type="button" class="btn btn-default"
                onclick="Europa.Controllers.EnderecoFornecedor.OpenModal()">
            <i class="fa fa-cog"></i> @GlobalMessages.Importar
        </button>
    @*}*@
</div>

<div class="col-md-24">
    <div class="col-md-6 form-group">
        @Html.Label(GlobalMessages.CodigoFornecedor)
        @Html.TextBox("CodigoFornecedor", String.Empty,new { @class = "form-control" })
    </div>
    <div class="col-md-6 col-md-offset-1 form-group">
        @Html.Label(GlobalMessages.Estados)
        @Html.DropDownList("filtro_estados", new SelectList(EstadosSelectList.ValuesWithEmpty, "Value", "Text"), new { @class = "form-control", multiple = "multiple" })
    </div>

    <div class="col-md-4 pull-right" style=" padding-top: 21px;padding-left: 40px;text-align: end;">
        <button class="btn btn-default text-right" onclick="Europa.Controllers.EnderecoFornecedor.FiltrarTabela()">
            <i class="fa fa-filter"></i>
            @GlobalMessages.Filtrar
        </button>
        <button class="btn btn-default text-right" onclick="Europa.Controllers.EnderecoFornecedor.LimparFiltro()">
            <i class="fa fa-eraser"></i>
            @GlobalMessages.Limpar
        </button>
    </div>
</div>

<div class="col-md-24">
    <div ng-controller="enderecoFornecedorTable as table">
        <div id="endereco_fornecedor_datatable_header">
        </div>
        <table datatable="" dt-options="table.dtOptions" dt-columns="table.dtColumns"
               dt-instance="table.dtInstance" class="table table-striped table-bordered"
               dt-column-defs="table.dtColumnDefs"></table>
    </div>
</div>

@{ 
    Html.RenderPartial("_ModalImport");
}