@using System.Security.Policy
@using Europa.Resources
@using Tenda.Domain.Core.Enums
@using System.Web.Mvc
@using Europa.Extensions
@using System.Collections.Generic

<script src="~/static/projeto/book-breve-lancamento/book-breve-lancamento.js"></script>

@{
    var bookTypes = new List<SelectListItem>();
    bookTypes.Add(new SelectListItem
    {
        Text = GlobalMessages.ImagemArquivo,
        Value = "0"
    });
    bookTypes.Add(new SelectListItem
    {
        Text = GlobalMessages.Video,
        Value = "1"
    });
}

<script>
    Europa.Controllers.BookBreveLancamento.UrlListar = '@Url.Action("Listar", "BookBreveLancamento")';
    Europa.Controllers.BookBreveLancamento.UrlUpload = '@Url.Action("Upload", "BookBreveLancamento")';
    Europa.Controllers.BookBreveLancamento.UrlVideoUpload = '@Url.Action("IncluirVideo", "BookBreveLancamento")';
    Europa.Controllers.BookBreveLancamento.UrlExcluir = '@Url.Action("Excluir", "BookBreveLancamento")';
</script>

<div class="modal" id="modal_book_empreeendimento" tabindex="-1" data-backdrop="static" role="dialog">
    <div class="modal-dialog" role="document" style="width:70%">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" onclick="Europa.Controllers.BookBreveLancamento.Modal.Hide()" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <h4 class="modal-title">@GlobalMessages.BookBreveLancamento</h4>
            </div>
            <div class="modal-body">
                <div class="container-fluid">
                    <div class="col-md-24">
                        <div class="col-md-6">
                            @Html.Label(GlobalMessages.Tipo, new {@class = "control-label", style = "overflow: hidden;"})
                            @Html.DropDownList("tipo_book_select", new SelectList(bookTypes, "Value", "Text", "0"), new {@class = "form-control", onchange="Europa.Controllers.BookBreveLancamento.OnBookTypeChanged()"})
                        </div>
                        <div id="image_upload_fields" class="col-md-6 col-md-offset-1">
                            <form id="form_upload">
                                <div class="col-md-24">
                                    @Html.Label(GlobalMessages.EnvioDeArquivo + " *", new {@class = "control-label", style = "overflow: hidden;"})
                                    <input name="Arquivo" id="Arquivo" type="file" class="control-label" style="width: 100%;">
                                </div>
                            </form>
                        </div>
                        <div id="video_upload_fields" class="col-md-6 col-md-offset-1" style="display: none;">
                            <div class="col-md-24">
                                @Html.Label(GlobalMessages.UrlVideo + " *", new {@class = "control-label", style = "overflow: hidden;"})
                                @Html.TextBox("VideoUrl", "", new { @class = "form-control", @maxlength = 128 })
                            </div>
                        </div>
                        <div class="col-md-4 col-md-offset-1">
                            <button type="button" class="btn btn-primary" style="margin-top:21px" onclick="Europa.Controllers.BookBreveLancamento.Upload()">
                                <i class="fa fa-save" aria-hidden="true"></i> @GlobalMessages.Enviar
                            </button>
                        </div>
                    </div>
                    <div class="col-md-24">
                        <div ng-controller="bookBreveLancamentoTable as table">
                            <div id="book_breve_lancamento_datatable_header" class="col-md-24">
                                <div class="col-md-6" style="margin-top:5px">
                                    @GlobalMessages.BookBreveLancamento
                                </div>
                                <div class="pull-right">
                                    <div class="btn-group">
                                    </div>
                                </div>
                            </div>
                            <table datatable="" dt-options="table.dtOptions" dt-columns="table.dtColumns"
                                   dt-instance="table.dtInstance" class="table table-striped table-bordered"
                                   dt-column-defs="table.dtColumnDefs">
                            </table>
                        </div>
                    </div>
                    @* <div id="template_target" class="col-md-24 book-container"> </div>*@
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" title="@GlobalMessages.Fechar" onclick="Europa.Controllers.BookBreveLancamento.Modal.Hide()">
                    <i class="fa fa-close"></i> @GlobalMessages.Fechar
                </button>
            </div>
        </div>
    </div>
</div>

<div id="template_grid_content" style="display:none">
    <div class="col-md-{size} book-item">
        <div class="col-md-24 book-item-img">
            <img src="{img-src}" class="book-img"/>
        </div>
        <div class="col-md-24 book-item-text">
            <label>{text}</label>
        </div>
    </div>
</div>

<style>
    .book-container {
        border: 1px solid #ccc;
    }
    .book-item {
        padding: 3px;
        border-right: 1px solid #ccc;
        border-bottom: 1px solid #ccc;
        height: 170px;
    }
    .book-item:last-child {
        border-right: none;
    }
    .book-item-img {
       text-align: center;
       vertical-align: middle;
    }
    .book-item-text {
        margin-top: 5px;
        text-align: center;
    }
    .book-img {
        max-width: 80%;
        margin-left: 10%;
        margin-right: 10%;
        height: 75%;
    }
</style>