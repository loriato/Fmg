@using Europa.Resources
@using Tenda.Domain.Core.Enums
@using Tenda.Domain.EmpresaVenda.Enums
@using Tenda.EmpresaVenda.Web.Models.Application
@using Europa.Extensions

@{
    ViewBag.Codigo = "PAG01";
    ViewBag.Title = ApplicationInfo.TituloUnidadeFuncional(ViewBag.Codigo);
}
<style>
    .info-proposta {
        display: none;
    }

    .hr-mais-filtro {
        margin-top: 5px;
        margin-bottom: 5px;
        border-top: 2px solid #eee;
    }
</style>

<script src="~/Static/projeto/relatorio-comissao/datatable-relatorio-comissao.js"></script>

<script>
    Europa.Controllers.RelatorioComissao.UrlListar = '@Url.Action("Listar", "RelatorioComissao")';
    Europa.Controllers.RelatorioComissao.UrlExportarPagina = '@Url.Action("ExportarPagina", "RelatorioComissao")';
    Europa.Controllers.RelatorioComissao.UrlExportarTodos = '@Url.Action("ExportarTodos", "RelatorioComissao")';
    Europa.Controllers.RelatorioComissao.UrlExportarRelatorioVendaUnificadoTodos = '@Url.Action("ExportarRelatorioVendaUnificadoTodos", "RelatorioComissao")';
    Europa.Controllers.RelatorioComissao.UrlRegraComissao = '@Url.Action("Index", "MatrizPagadoria")';
</script>
<div id="titlebar-name">@ViewBag.Title</div>
<form id="form-relatorio-comissao">
    <div class="col-md-24">
        <div class="col-md-4 form-group">
            @Html.Label(GlobalMessages.CodigoPreProposta)
            @Html.TextBox("filtro_codigo_preproposta", "", new { @class = "form-control", maxlength = 128 })
        </div>

        <div class="col-md-4 form-group col-md-offset-1">
            @Html.Label(GlobalMessages.CodigoProposta)
            @Html.TextBox("filtro_codigo_proposta", "", new { @class = "form-control", maxlength = 128 })
        </div>

        <div class="col-md-4 form-group col-md-offset-1">
            @Html.Label(GlobalMessages.UF)
            @Html.DropDownList("filtro_estado", new SelectList(EstadosSelectList.ValuesWithEmpty, "Value", "Text"), new { @class = "form-control", multiple = "multiple" })
        </div>

        <div class="col-md-5 col-md-offset-1">
            @Html.Label(GlobalMessages.Regional)
            <select id="autocomplete_regionais" name="autocomplete_regionais" class="select2-container form-control" multiple="multiple"></select>
        </div>

        <div class="col-md-3 form-group col-md-offset-1">
            @Html.Label(GlobalMessages.StatusContrato)
            @Html.TextBox("filtro_status_contrato", "", new { @class = "form-control", maxlength = 20 })
        </div>
    </div>

    <div class="col-md-24">

        <div class="col-md-4 form-group ">
            @Html.Label(GlobalMessages.Cliente)
            @Html.TextBox("filtro_cliente", "", new { @class = "form-control", maxlength = 128 })
        </div>
        <div class="col-md-4 form-group col-md-offset-1">
            @Html.Label(GlobalMessages.NomeFornecedor)
            @Html.TextBox("filtro_nome_fornecedor", "", new { @class = "form-control", maxlength = 25 })
        </div>
        <div class="col-md-4 col-md-offset-1  form-group">
            @Html.Label(GlobalMessages.CodigoFornecedor)
            @Html.TextBox("filtro_codigo_fornecedor", "", new { @class = "form-control", maxlength = 20 })
        </div>
        <div class="col-md-5 form-group col-md-offset-1">
            @Html.Label(GlobalMessages.Empreendimento)
            <select id="autocomplete_empreendimento" name="autocomplete_empreendimento" class="select2-container form-control" multiple="multiple"></select>
        </div>
        <div class="col-md-3 col-md-offset-1 form-group">
            @Html.Label(GlobalMessages.Faturado)
            <select class="form-control" id="filtro_faturado" name="filtro_faturado">
                <option value="0" selected>@GlobalMessages.Selecione</option>
                <option value="1">@GlobalMessages.Sim</option>
                <option value="2">@GlobalMessages.Nao</option>
            </select>
        </div>
    </div>
    <div class="col-md-24">
        <div class="col-md-4  form-group">
            @Html.Label(GlobalMessages.DataVenda)
            <div class="input-group">
                <span class="input-group-addon">@GlobalMessages.De</span>
                @Html.TextBox("filtro_data_venda_de", "", new { @class = "form-control", datepicker = "datepicker", parent = "#form_filtro", @style = "height:30px" })
                <span class="input-group-btn">
                    <button class="btn btn-default" type="button" style="height:30px" onclick=" Europa.Components.DatePicker.ClosestInput(this) ">
                        <i class="fa fa-calendar"></i>
                    </button>
                </span>
            </div>
        </div>
        <div class="col-md-4 col-md-offset-1">
            @Html.Label(GlobalMessages.DataVenda, new { style = "visibility:hidden" })
            <div class="input-group">
                <span class="input-group-addon">@GlobalMessages.Ate</span>
                @Html.TextBox("filtro_data_venda_ate", "", new { @class = "form-control", datepicker = "datepicker", parent = "#form_filtro", @style = "height:30px" })
                <span class="input-group-btn">
                    <button class="btn btn-default" type="button" style="height:30px" onclick=" Europa.Components.DatePicker.ClosestInput(this) ">
                        <i class="fa fa-calendar"></i>
                    </button>
                </span>
            </div>
        </div>

        <div class="col-md-4 col-md-offset-1 form-group">
            @Html.Label(GlobalMessages.EmpresaVenda)
            <select id="autocomplete_empresa_venda" onchange="Europa.Controllers.RelatorioComissao.OnChangeEmpresaFiltro()" name="autocomplete_empresa_venda" class="select2-container form-control" multiple="multiple"></select>
        </div>
        <div class="col-md-5 form-group col-md-offset-1">
            @Html.Label(GlobalMessages.PontoVenda)
            <select id="autocomplete_ponto_venda" name="autocomplete_ponto_venda" class="select2-container form-control" multiple></select>
        </div>

        <div class="pull-right" style="margin-top:18px;">
            <button class="btn btn-default" title="@GlobalMessages.Filtrar" onClick="Europa.Controllers.RelatorioComissao.Filtrar();"><i class="fa fa-filter"></i> @GlobalMessages.Filtrar</button>
            <button type="button" title="@GlobalMessages.Limpar" class="btn btn-default" onClick="Europa.Controllers.RelatorioComissao.LimparFiltro()"><i class="fa fa-eraser"></i> @GlobalMessages.Limpar</button>
        </div>
    </div>
</form>


@{
    Html.RenderPartial("_DataTable");
}

