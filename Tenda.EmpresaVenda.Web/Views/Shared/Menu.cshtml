@using Europa.Resources
@using Tenda.EmpresaVenda.Web.Models.Application

<script src="~/Static/projeto/notificacoes/modal-mensagens.js"></script>
<style>
    .popover-content {
        text-align: right;
        font-family: AktivGrotesk;
        font-size: 14px;
        width: 324px;
        color: var(--dark);
        padding-right: 25px;
    }

    .popover {
        max-width: 324px;
    }

    .btn-popover {
        width: 141px;
        height: 29px;
        letter-spacing: 0.13px;
        text-align: center;
    }

    #style-1::-webkit-scrollbar-track {
        -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.3);
        border-radius: 0px;
        background-color: var(--steel)
    }

    #style-1::-webkit-scrollbar {
        width: 10px;
        background-color: var(--steel);
    }

    #style-1::-webkit-scrollbar-thumb {
        border-radius: 0px;
        -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,.3);
        background-color: #FFFF;
    }

    #nav_bar .infos .sino {
        float: left;
        margin-right: 24px;
    }

    #nav_bar .infos .sino img {
        width: 20px;
        cursor: pointer;
        padding-top: 3px;
    }
    #quant_noti {
        height: 10px;
        width: 10px;
        background-color: #fffdfd;
        border-radius: 50%;
        display: inline-block;
        text-align: center;
        position: absolute;
        left: 85%;
    }
    #sino {
        margin-top: 5px;
    }
</style>
<nav class="menu navbar navbar-default navbar-fixed-top">
    <div class="container-fluid">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#menu_navbar_collapse" aria-expanded="false">
                <span class="sr-only">Menu</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="#">
                <img src="~/Static/images/logo_icone.png" onclick="urlHome()" />
            </a>
        </div>
        <div class="collapse navbar-collapse" id="menu_navbar_collapse">
            <ul class="nav navbar-nav">
                @Html.Raw(SessionAttributes.Current().MenuHtml)
            </ul>

            @{
                Html.RenderPartial("~/Views/Shared/_ModalNotificacao/_ModalMensagens.cshtml");
            }

            @{
                if (SessionAttributes.Current().IsValidSession())
                {
                    using (Html.BeginForm("Logout", "Login", FormMethod.Post, new { role = "form", id = "logout", @class = "navbar-form navbar-right" }))
                    {
                        <div class="infos" style="display: flex">
                            <div>
                                @if (SessionAttributes.Current().NotificacoesNaoLidas > 0)
                                {<span class="@(SessionAttributes.Current().NotificacoesNaoLidas == 0 ? "hide" : "")" id="quant_noti"></span>}
                                <span class="sino" id="exibir-msg"><a href=""><img id="sino" onclick="Europa.Controllers.ModalMensagens.AbrirModal()" src="~/Static/images/sino.png" /></a></span>
                            </div>
                            <p class="navbar-text" style="padding-top: 5px">
                                @SessionAttributes.Current().UsuarioPortal.Nome
                            </p>
                            <button id="info-user" class="btn fa fa-info-circle" type="button" style="background: none; border: none;box-shadow:none; color:white;margin-bottom:4px;"
                                    data-toggle="popover" data-placement="bottom" data-content="@Html.Raw(SessionAttributes.Current().InfoHtml)" data-html="true"></button>

                            <button class="btn btn-primary" type="submit" onclick="Spinner.Show();" style="background: none; border: none;box-shadow:none;margin-bottom:4px;">Sair</button>
                        </div>

                    }
                    <script>
                        $(function () {
                            $("#info-user").popover();
                        });
                    </script>
                }
            }
        </div>
    </div>
</nav>
