@using Tenda.EmpresaVenda.Web.Models.Application
@using Europa.Resources
@using Tenda.Domain.Core.Enums
@using Tenda.Domain.EmpresaVenda.Enums
@{
    ViewBag.Codigo = "GEC10";
    ViewBag.Title = ApplicationInfo.TituloUnidadeFuncional(ViewBag.Codigo);
}


<script src="~/Static/projeto/carga-valor-nominal-referencia/carga-valor-nominal-referencia.js"></script>

<script>
    Europa.Controllers.ValorNominal.UrlListar = '@Url.Action("Listar", "CargaValorNominalReferencia")';
    Europa.Controllers.ValorNominal.UrlExportarPagina = '@Url.Action("ExportarPagina","CargaValorNominalReferencia")';
    Europa.Controllers.ValorNominal.UrlExportarTodos = '@Url.Action("ExportarTodos","CargaValorNominalReferencia")';
</script>

<div id="titlebar-name">@ViewBag.Title</div>


<div id="titlebar-buttons">
    @if (SessionAttributes.Current().HasPermission(ViewBag.Codigo, "ImportarTabelas"))
    {
        <button type="button" class="btn btn-default"
                onclick="Europa.Controllers.ImportExcel.AbrirModal()">
            <i class="fa fa-cog"></i> @GlobalMessages.Importar
        </button>
    }
</div>

<div class="col-md--24">
    <form>
        <div class="col-md-5 form-group">
            @Html.Label(GlobalMessages.Empreendimento)
            <select id="autocomplete_empreendimento" class="form-control"></select>
        </div>
        <div class="col-md-5 col-md-offset-1">
            @Html.Label(GlobalMessages.Estado)
            @Html.DropDownList("filtro_estados", new SelectList(EstadosSelectList.Values, "Value", "Text"), new { @class = "form-control", multiple = "multiple" })
        </div>
        <div class="col-md-4 col-md-offset-1">
            @Html.Label(GlobalMessages.VigenteEm)
            <div class="input-group">
                @Html.TextBox("filtro_vigente_em", " ", new { @class = "form-control", datepicker = "datepicker", style = "height: 29px;" })
                <span class="input-group-btn">
                    <button class="btn btn-default" type="button" onclick="Europa.Components.DatePicker.ClosestInput(this)">
                        <i class="fa fa-calendar"></i>
                    </button>
                </span>
            </div>
        </div>
        <div class="col-md-4 col-md-offset-1">
            @Html.Label(GlobalMessages.Situacao)
            @Html.DropDownList("filtro_situacao", EnumHelper.GetSelectList(typeof(SituacaoValorNominal)), "", new { @class = "form-control" })
        </div>

        <div class="pull-right" style="margin-top:20px">
            <button class="btn btn-default" title="@GlobalMessages.Filtrar" onClick="Europa.Controllers.ValorNominal.Filtrar()"><i class="fa fa-filter"></i> @GlobalMessages.Filtrar</button>
            <button class="btn btn-default" type="button" title="@GlobalMessages.Limpar" onClick="Europa.Controllers.ValorNominal.LimparFiltro()"><i class="fa fa-eraser"></i> @GlobalMessages.Limpar</button>
        </div>
    </form>
</div>

<div ng-controller="ValorNominalEmpreendimento as table">
    <div id="datatable_header" class="col-md-24">
        <div class="col-md-5">
            <h5 style="margin-top:6px;margin-bottom:0px;">
                @GlobalMessages.ValorNominalReferecencia
            </h5>
        </div>
        <div class="pull-right">
            @if (SessionAttributes.Current().HasPermission("GEC10", "ExportarPagina"))
            {
                <button type="button" title="@GlobalMessages.ExportarPagina" class="btn btn-default" onclick="Europa.Controllers.ValorNominal.ExportarPagina()">
                    <i class="fa fa-file-excel-o"></i> @GlobalMessages.ExportarPagina
                </button>
            }
            @if (SessionAttributes.Current().HasPermission("GEC10", "ExportarTodos"))
            {
                <button type="button" title="@GlobalMessages.ExportarTodos" class="btn btn-default" onclick="Europa.Controllers.ValorNominal.ExportarTodos()">
                    <i class="fa fa-file-excel-o"></i> @GlobalMessages.ExportarTodos
                </button>
            }

        </div>
    </div>

    <table datatable="" dt-options="table.dtOptions" dt-columns="table.dtColumns"
           dt-instance="table.dtInstance" class="table table-striped table-bordered"
           dt-column-defs="table.dtColumnDefs"></table>
</div>

<form id="Exportar"></form>
@{
    Html.RenderPartial("_Anexo");
    Html.RenderPartial("_StatusImportacao");
}

